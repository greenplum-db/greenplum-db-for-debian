From: "Bradford D. Boyle" <bradford.d.boyle@gmail.com>
Date: Wed, 23 Dec 2020 16:56:25 -0800
Subject: use python2 for instead of python

Authored-by: Bradford D. Boyle <bradfordb@vmware.com>
---
 gpMgmt/bin/Makefile | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

--- a/gpMgmt/bin/Makefile
+++ b/gpMgmt/bin/Makefile
@@ -56,7 +56,7 @@
 PYLIB_DIR=$(SRC)/ext
 
 core:
-	python3 gpconfig_modules/parse_guc_metadata.py $(DESTDIR)$(prefix)
+	$(PYTHON) gpconfig_modules/parse_guc_metadata.py $(DESTDIR)$(prefix)
 
 install: installdirs installprograms core
 
@@ -76,7 +76,7 @@
 SETUP_TOOLS_DIR=setuptools-$(SETUP_TOOLS_VERSION)
 PARSE_DIR=parse-$(PARSE_VERSION)
 PYTHONSRC_INSTALL=$(PYLIB_SRC_EXT)/install
-PYTHON_VERSION=$(shell python3 -c "import sys; print ('%s.%s' % (sys.version_info[0:2]))")
+PYTHON_VERSION=$(shell $(PYTHON) -c "import sys; print ('%s.%s' % (sys.version_info[0:2]))")
 PYTHONSRC_INSTALL_SITE=$(PYLIB_SRC_EXT)/install/lib/python$(PYTHON_VERSION)/site-packages
 PYTHONSRC_INSTALL_PYTHON_PATH=$(PYTHONPATH):$(PYTHONSRC_INSTALL_SITE)
 UBUNTU_PLATFORM=$(shell if lsb_release -a 2>/dev/null | grep -q 'Ubuntu' ; then echo "Ubuntu"; fi)
@@ -84,11 +84,11 @@
 pylint:
 	@echo "--- pylint"
 	@cd $(PYLIB_SRC_EXT)/ && $(TAR) xzf $(PYLINT_DIR).tar.gz
-	@cd $(PYLIB_SRC_EXT)/$(PYLINT_DIR)/ && python3 setup.py build 1> /dev/null
+	@cd $(PYLIB_SRC_EXT)/$(PYLINT_DIR)/ && $(PYTHON) setup.py build 1> /dev/null
 	@touch $(PYLIB_SRC_EXT)/$(PYLINT_DIR)/build/lib/__init__.py
 
-PYTHON_FILES=`grep -l --exclude=Makefile --exclude=gplogfilter "/bin/env python3" *`\
-			 `grep -l "/bin/env python3" $(SRC)/../sbin/*`\
+PYTHON_FILES=`grep -l --exclude=Makefile --exclude=gplogfilter "/bin/env $(PYTHON)" *`\
+			 `grep -l "/bin/env $(PYTHON)" $(SRC)/../sbin/*`\
 			 `find ./gppylib -name "*.py"`\
 			 `find $(SRC)/../sbin -name "*.py"`
 
@@ -108,7 +108,7 @@
 unitdevel:
 	@echo "Running pure unit tests..."
 	PYTHONPATH=$(SERVER_SRC):$(SERVER_SBIN):$(PYTHONPATH):$(PYTHONSRC_INSTALL_PYTHON_PATH):$(SRC)/ext:$(SBIN_DIR):$(LIB_DIR):$(PYLIB_DIR)/mock-1.0.1 \
-	    python3 -m unittest discover --verbose -s $(SRC)/gppylib -p "test_unit*.py"
+	    $(PYTHON) -m unittest discover --verbose -s $(SRC)/gppylib -p "test_unit*.py"
 
 
 .PHONY: installcheck-bash
